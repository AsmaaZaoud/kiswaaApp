/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */

'use strict';

/**
 * This script prepares Hermes to be built as part of the
 * iOS build pipeline on macOS.
 */
const {
  configureMakeForPrebuiltHermesC,
  copyBuildScripts,
  copyPodSpec,
<<<<<<< HEAD
  downloadHermesSourceTarball,
  expandHermesSourceTarball,
=======
  downloadHermesTarball,
  expandHermesTarball,
>>>>>>> main
  shouldUsePrebuiltHermesC,
  shouldBuildHermesFromSource,
} = require('./hermes-utils');

<<<<<<< HEAD
async function main(isInCI) {
  if (!shouldBuildHermesFromSource(isInCI)) {
    copyPodSpec();
    return;
  }
  downloadHermesSourceTarball();
  expandHermesSourceTarball();
=======
async function main(pullRequest) {
  if (!shouldBuildHermesFromSource(pullRequest)) {
    copyPodSpec();
    return;
  }

  downloadHermesTarball();
  expandHermesTarball();
>>>>>>> main
  copyPodSpec();
  copyBuildScripts();

  if (shouldUsePrebuiltHermesC('macos')) {
    console.log('[Hermes] Using pre-built HermesC');
    configureMakeForPrebuiltHermesC();
  }
}

<<<<<<< HEAD
const isInCI = process.env.REACT_NATIVE_CI === 'true';

main(isInCI).then(() => {
=======
const pullRequest = process.argv.length > 2 ? process.argv[2] : null;
console.log(`Pull request detected: ${pullRequest}`);
main(pullRequest).then(() => {
>>>>>>> main
  process.exit(0);
});
